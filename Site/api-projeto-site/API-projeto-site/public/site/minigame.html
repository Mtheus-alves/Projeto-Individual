<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minigame</title>
    <link rel="stylesheet" href="css/css.css">
    <link rel="icon" href="imgs/logo.gif">
</head>

<body>
    <div class="lateral">
        <img src="imgs/logo.gif" alt="">

        <div class="nav_dash">

            <nav>
                <ul>
                    <li><a href="progresso.html">Progresso </a></li>

                    <li><a href="minigame.html"> Game of skate</a></li>

                    <li><a href="index.html">Sair</a></li>
                </ul>
            </nav>
        </div>
    </div>



    <center>
        <div id="gameskate">


            <div id="regras">

                <h1>GAME OF SKATE</h1> <br><br>
                * Clique no botão abaixo para começar a jogar <br><br>

                * A cada rodada você paga R$2,00 para jogar, <br>se acertar a manobra ganha R$5,00 e se errar não ganha
                nada.
                <br><br>

                * Você pode encerrar a partida e iniciar outra á qualquer momento. <br><br>

                * Boa sorte!
                <br><br>
                <button onclick="jogar()">Começar o Jogo!</button>
            </div>

            <div id="jogo" style="display: none;">
                <h1>GAME OF SKATE</h1>
                <button id="btn_pag" onclick="pagar()">Fazer manobra</button> 
                <button id="btn_enc" onclick="encerrar()">Encerrar Game</button>

                <div id="result"></div>
                <div id="result2"></div>
                <div id="result3"></div>
<br><br>
                <button style="display: none;" onclick="voltar()" id="btn_volt">Novo Jogo</button>
            </div>
           
        </div>
    </center>
</body>

</html>
<script>
    var rod = 0;
    var gastos = 0;
    var total = 0;

    var total_gasto = [];
    var resultados = [];
    var rodada = [];
    var valor_ganho = [];




    function jogar() {
        regras.style.display = 'none';
        jogo.style.display = 'inline'
    }

    function pagar() {
        result.innerHTML = ''

        rod++;
        gastos++;


        rodada.push(rod);

        total_gasto.push(gastos)


        sorteio = parseInt(Math.random() * 2)
        resultados.push(sorteio)


        if (sorteio == 0) {
            result.innerHTML += `<img src="imgs/skatista.gif"><br>`
            result.innerHTML += 'nesta rodada você ganhou R$5,00<br>'
            valor_ganho.push(5)
        }

        else if (sorteio == 1) {
            result.innerHTML += `<img src="imgs/fail.gif"> <br>`
            result.innerHTML += 'nesta rodada você não ganhou nada<br>'
            valor_ganho.push(0)
        }


        console.log(sorteio)

    }


    function encerrar() {
        var gastos = total_gasto.length * 2


        result.style.display = 'none'
        for (var i = 0; i < valor_ganho.length; i++) {

            total = total + valor_ganho[i]
        }
        var valor_final = total - gastos
        result2.innerHTML = `<br> <b> RESUMO DO GAME</b> <br><br>
    Quantidade de rodadas: ${(rodada.length - 1) + 1}
    <br><br>
    Valor total gasto: R$${gastos}
    <br><br>
    Valor total ganho:R$${total}
    <br><br>`


        if (valor_final > 0) {
            result3.innerHTML = `Você ganhou R$${valor_final}`
        }

        else if (valor_final < 0) {
            result3.innerHTML = `Você perdeu R$${gastos - total}`
        }

        else if (valor_final == 0) {
            result3.innerHTML = 'Você não ganhou nada, mas também não perdeu!'

        }
        btn_pag.style.display='none'
     btn_enc.style.display='none'
     btn_volt.style.display='inline'
    }

   function voltar(){
    document.location.reload(true);
   }
</script>